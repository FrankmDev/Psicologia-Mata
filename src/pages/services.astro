---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { allServices } from '../data/services';

const serviceImages: Record<string, string> = {
  individual: 'https://images.unsplash.com/photo-1573497620053-ea5300f94f21?auto=format&fit=crop&w=800&q=80',
  pareja: 'https://images.unsplash.com/photo-1516589178581-6cd7833ae3b2?auto=format&fit=crop&w=800&q=80',
  familiar: 'https://images.unsplash.com/photo-1511895426328-dc8714191300?auto=format&fit=crop&w=800&q=80',
  evaluacion: 'https://images.unsplash.com/photo-1506126613408-eca07ce68773?auto=format&fit=crop&w=800&q=80',
  cognitiva: 'https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?auto=format&fit=crop&w=800&q=80',
};

const stats = [
  { value: '15+', label: 'Años de experiencia' },
  { value: '800+', label: 'Pacientes atendidos' },
  { value: '50min', label: 'Por sesión' },
];

const faqs = [
  {
    question: '¿Cuánto dura una sesión?',
    answer: 'Las sesiones de terapia individual duran 50 minutos. Las de pareja 60 minutos y las familiares 75 minutos.',
  },
  {
    question: '¿Necesito acudir cada semana?',
    answer: 'La frecuencia se determina según tus necesidades. Generalmente empezamos con sesiones semanales.',
  },
  {
    question: '¿Cómo sé qué servicio necesito?',
    answer: 'En la primera consulta valoramos tu situación y te recomiendo el enfoque más adecuado.',
  },
];
---

<Layout 
  title="Servicios de Psicología en Córdoba | María Ángeles Mata"
  description="Servicios profesionales de psicología en Córdoba: terapia individual, de pareja, familiar, evaluación neuropsicológica y estimulación cognitiva."
>
  <Header activePage="Servicios" />
  
  <main id="main-content">
    
    <!-- Header -->
    <section class="pt-12 pb-8 bg-cream">
      <div class="container-editorial">
        <div class="max-w-2xl" data-reveal>
          <div class="mb-4">
            <span class="label-section">Servicios</span>
          </div>
          <h1 class="title-section mb-4">
            Servicios de <em>psicología</em>
          </h1>
          <p class="text-body">
            Terapia individual, de pareja y familiar en Córdoba. Atención presencial y a domicilio.
          </p>
        </div>
      </div>
    </section>

    <!-- Stats -->
    <section class="py-6 bg-warm/30 border-y border-border">
      <div class="container-editorial">
        <div class="grid grid-cols-3 gap-4" data-reveal>
          {stats.map((stat) => (
            <div class="text-center">
              <div class="font-serif text-2xl lg:text-3xl text-sage">{stat.value}</div>
              <div class="text-[10px] text-gray uppercase tracking-wider mt-1">{stat.label}</div>
            </div>
          ))}
        </div>
      </div>
    </section>

    <!-- Servicios -->
    {allServices.map((service, index) => {
      const isEven = index % 2 === 0;
      return (
        <section 
          id={service.id}
          class={`section-sm ${isEven ? 'bg-cream' : 'bg-white'}`}
        >
          <div class="container-editorial">
            <div class={`grid lg:grid-cols-2 gap-8 lg:gap-12 items-center ${!isEven ? 'lg:flex-row-reverse' : ''}`}>
              
              <!-- Texto -->
              <div class={`${!isEven ? 'lg:order-2' : ''}`} data-reveal>
                <span class="text-[10px] text-sage font-medium uppercase tracking-wider">Servicio {service.number}</span>
                <h2 class="font-serif text-2xl lg:text-3xl text-charcoal mt-2 mb-4 leading-tight">
                  {service.title.split(' ').slice(0, -1).join(' ')} <span class="text-sage italic">{service.title.split(' ').slice(-1)}</span>
                </h2>
                
                <p class="text-body text-sm mb-5">
                  {service.description}
                </p>
                
                <div class="flex flex-wrap gap-2 mb-6">
                  {service.approaches.map((approach) => (
                    <span class="px-2.5 py-1 bg-sage/10 text-sage text-[10px] uppercase tracking-wide rounded-full">
                      {approach}
                    </span>
                  ))}
                </div>
                
                <div class="flex items-center gap-4">
                  <a href="/contact" class="btn btn-sage text-xs">
                    <span>Reservar sesión</span>
                  </a>
                  <span class="text-xs text-gray">{service.duration}</span>
                </div>
              </div>
              
              <!-- Imagen -->
              <div class={`${!isEven ? 'lg:order-1' : ''}`} data-reveal={isEven ? "right" : "left"}>
                <div class="relative rounded-xl overflow-hidden aspect-[4/3] shadow-lg">
                  <img 
                    src={serviceImages[service.id]} 
                    alt={service.title}
                    class="w-full h-full object-cover"
                    width="600"
                    height="450"
                    loading={index === 0 ? 'eager' : 'lazy'}
                  />
                  <div class="absolute inset-0 bg-gradient-to-t from-charcoal/30 to-transparent"></div>
                  
                  <div class="absolute bottom-4 left-4">
                    <div class="w-10 h-10 rounded-lg bg-cream/95 flex items-center justify-center text-sage shadow-md">
                      <Fragment set:html={service.icon} />
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
      );
    })}

    <!-- FAQ -->
    <section class="section-sm bg-warm/30">
      <div class="container-editorial max-w-2xl">
        <div class="text-center mb-8" data-reveal>
          <div class="justify-center mb-3">
            <span class="label-section">FAQ</span>
          </div>
          <h2 class="font-serif text-2xl text-charcoal">
            Preguntas <em>frecuentes</em>
          </h2>
        </div>
        
        <div class="space-y-3">
          {faqs.map((faq, index) => (
            <div class="card overflow-hidden" data-reveal data-reveal-delay={index * 100}>
              <details class="group">
                <summary class="flex items-center justify-between p-4 cursor-pointer list-none">
                  <h3 class="font-serif text-base text-charcoal group-hover:text-sage transition-colors pr-4">
                    {faq.question}
                  </h3>
                  <div class="w-6 h-6 rounded bg-warm flex items-center justify-center shrink-0">
                    <svg class="w-3.5 h-3.5 text-gray group-open:rotate-180 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                    </svg>
                  </div>
                </summary>
                <div class="px-4 pb-4">
                  <p class="text-body text-sm">{faq.answer}</p>
                </div>
              </details>
            </div>
          ))}
        </div>
      </div>
    </section>

    <!-- CTA -->
    <section class="py-12 bg-sage">
      <div class="container-editorial">
        <div class="max-w-xl mx-auto text-center" data-reveal>
          <h2 class="font-serif text-2xl text-cream mb-3">
            ¿Listo para empezar?
          </h2>
          <p class="text-cream/70 text-sm mb-6">
            La primera consulta es una oportunidad para conocernos y valorar cómo puedo ayudarte.
          </p>
          <a href="/contact" class="btn btn-cream text-xs">
            Pedir consulta
          </a>
        </div>
      </div>
    </section>
  </main>
  
  <Footer />
</Layout>
