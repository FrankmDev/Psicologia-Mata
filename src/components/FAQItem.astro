---
interface Props {
  question: string;
  index?: number;
  class?: string;
}

const { question, index, class: className = '' } = Astro.props;
---

<details class={`group bg-white rounded-lg border border-border open:border-sage/30 open:shadow-sm ${className}`}>
  <summary class="flex cursor-pointer items-center justify-between gap-4 p-5 select-none list-none">
    <div class="flex items-center gap-3 min-w-0">
      {index !== undefined && (
        <span class="flex items-center justify-center w-7 h-7 rounded-md bg-sage/10 text-sage text-[10px] font-mono font-medium shrink-0">
          {String(index + 1).padStart(2, '0')}
        </span>
      )}
      <h3 class="font-serif text-base lg:text-lg text-charcoal group-hover:text-sage transition-colors pr-2">
        {question}
      </h3>
    </div>
    <div class="w-7 h-7 rounded-md bg-warm flex items-center justify-center shrink-0 group-hover:bg-sage/10 transition-colors">
      <svg 
        class="w-3.5 h-3.5 text-gray group-hover:text-sage transition-colors group-open:rotate-180" 
        fill="none" 
        viewBox="0 0 24 24" 
        stroke="currentColor"
        stroke-width="2"
      >
        <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
      </svg>
    </div>
  </summary>
  <div class="px-5 pb-5 pl-[3.25rem] text-body text-sm">
    <slot />
  </div>
</details>

<style>
  summary::-webkit-details-marker { display: none; }
  summary::marker { display: none; }
  
  details[open] summary ~ * {
    animation: sweep-in 0.25s ease-out;
  }
  
  @keyframes sweep-in {
    0% { opacity: 0; transform: translateY(-4px); }
    100% { opacity: 1; transform: translateY(0); }
  }
</style>
