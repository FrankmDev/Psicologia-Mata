---
import { blogPostsList } from '../../data/blog';

const previewPosts = blogPostsList.slice(0, 3);
const featuredPost = previewPosts[0];
const secondaryPosts = previewPosts.slice(1);
---

<section class="section bg-cream" id="blog">
  <div class="container-wide">
    
    <!-- Header -->
    <div class="flex flex-col lg:flex-row lg:items-end lg:justify-between gap-4 mb-10">
      <div data-reveal>
        <div class="mb-3">
          <span class="label-section">Blog</span>
        </div>
        <h2 class="title-section">
          Reflexiones sobre <em>bienestar</em>
        </h2>
      </div>
      
      <div data-reveal data-reveal-delay="100">
        <a href="/blog" class="btn btn-outline text-xs py-2.5 px-5">Ver todos los art√≠culos</a>
      </div>
    </div>

    <!-- Grid corregido - alineado -->
    <div class="grid lg:grid-cols-12 gap-5">
      
      <!-- Destacado - 7 columnas -->
      <div class="lg:col-span-7" data-reveal data-reveal-delay="200">
        <a href={`/blog/${featuredPost.slug}`} class="group block h-full">
          <article class="relative h-full min-h-[420px] rounded-xl overflow-hidden">
            <img 
              src={featuredPost.image} 
              alt={featuredPost.title}
              class="absolute inset-0 w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
              width="800"
              height="600"
            />
            <div class="absolute inset-0 bg-gradient-to-t from-charcoal/90 via-charcoal/40 to-transparent"></div>
            
            <div class="absolute inset-0 flex flex-col justify-end p-6">
              <div class="flex items-center gap-3 mb-3">
                <span class="tag">{featuredPost.category}</span>
                <span class="text-cream/60 text-xs">{featuredPost.readTime}</span>
              </div>
              
              <h3 class="font-serif text-2xl text-cream mb-2 group-hover:text-sage-light transition-colors">
                {featuredPost.title}
              </h3>
              
              <p class="text-cream/70 text-sm leading-relaxed mb-4 line-clamp-2">
                {featuredPost.excerpt}
              </p>
              
              <div class="flex items-center justify-between pt-4 border-t border-cream/20">
                <time class="text-cream/50 text-xs">{featuredPost.date}</time>
                <span class="text-xs font-medium text-cream group-hover:text-sage-light transition-colors flex items-center gap-1">
                  Leer
                  <svg class="w-3.5 h-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M17.25 8.75L21 12m0 0l-3.75 3.25M21 12H3" />
                  </svg>
                </span>
              </div>
            </div>
          </article>
        </a>
      </div>

      <!-- Secundarios - 5 columnas, misma altura -->
      <div class="lg:col-span-5 flex flex-col gap-5">
        {secondaryPosts.map((post, index) => (
          <a href={`/blog/${post.slug}`} class="group block flex-1" data-reveal data-reveal-delay={300 + index * 100}>
            <article class="card h-full flex overflow-hidden">
              <!-- Imagen cuadrada -->
              <div class="relative w-36 shrink-0 overflow-hidden">
                <img 
                  src={post.image} 
                  alt={post.title}
                  class="absolute inset-0 w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
                  width="200"
                  height="200"
                  loading="lazy"
                />
              </div>
              
              <!-- Contenido -->
              <div class="flex-1 p-5 flex flex-col justify-center">
                <div class="flex items-center gap-2 mb-2">
                  <span class="text-[10px] font-medium text-sage uppercase tracking-wide">{post.category}</span>
                  <span class="w-1 h-1 rounded-full bg-gray"></span>
                  <span class="text-[10px] text-gray">{post.readTime}</span>
                </div>
                
                <h3 class="font-serif text-base text-charcoal mb-2 group-hover:text-sage transition-colors line-clamp-2">
                  {post.title}
                </h3>
                
                <div class="flex items-center justify-between mt-auto pt-3 border-t border-border">
                  <time class="text-[10px] text-gray">{post.date}</time>
                  <span class="text-[10px] font-medium text-sage flex items-center gap-1">
                    Leer
                    <svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M17.25 8.75L21 12m0 0l-3.75 3.25M21 12H3" />
                    </svg>
                  </span>
                </div>
              </div>
            </article>
          </a>
        ))}
      </div>
    </div>
  </div>
</section>
